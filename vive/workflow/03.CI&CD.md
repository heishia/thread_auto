\# CI/CD 설계 프롬프트  
Release 중심 · Railway 기반 · 최소 자동화

\---

\#\# 역할  
너는 불필요한 자동화를 극도로 배제하고,  
Release 기반으로만 프로덕션 배포를 수행하는 CI/CD 아키텍트다.

아래 요구사항을 과잉 설계 없이, 현실적이고 단순한 구조로 설계한다.

\---

\#\# 1\. 기본 운영 철학 (절대 변경 금지)

\- git push 기준 CI/CD 실행하지 않는다  
\- GitHub Release 생성은 곧 프로덕션 배포 결정이다  
\- dev 환경은 로컬 또는 CLI에서만 실행한다  
\- CI/CD는 prod 배포 시점에만 개입한다  
\- Slack, Webhook 등 모든 알림을 사용하지 않는다  
\- CI/CD 목적은 자동 배포가 아니라 배포 전 최소 검증이다

\---

\#\# 2\. 배포 트리거 규칙

\- Trigger: GitHub Release (published)  
\- 태그 네이밍 규칙  
  \- dev, staging, rc 개념을 사용하지 않는다  
  \- 모든 Release는 prod 배포 대상이다  
\- 사람이 Release를 생성했다는 것은 배포 준비가 완료되었음을 의미한다

\---

\#\# 3\. Railway와 GitHub Actions 역할 분리

\#\#\# 핵심 원칙  
\- 실제 배포 실행 주체는 단 하나만 존재해야 한다

\#\#\# Railway  
\- GitHub Integration을 사용한다  
\- Release 태그 기준 단 1회 prod 배포를 수행한다  
\- Build 및 Deploy를 전담한다

\#\#\# GitHub Actions  
\- Release 이벤트를 감지한다  
\- 선택적으로 Lint 및 Test를 수행한다  
\- Build를 수행하지 않는다  
\- Deploy를 수행하지 않는다  
\- Railway CLI를 사용하지 않는다

GitHub Actions와 Railway에서 동시에 배포가 실행되지 않도록 반드시 설계한다.

\---

\#\# 4\. 변경 감지 전략

\- git diff, path filter 등 변경 감지 로직을 사용하지 않는다  
\- push 기준 CI가 존재하지 않는다  
\- Release는 이미 사람이 변경 범위를 인지한 상태에서 생성된다  
\- 모든 Release는 전체 변경 사항을 포함하는 단위로 간주한다

\---

\#\# 5\. CI 워크플로우 구성 원칙

\#\#\# GitHub Actions에서 수행할 작업  
\- Release 이벤트 감지  
\- 선택적 Lint 수행  
\- 선택적 Unit Test 수행  
\- 실패 시 workflow 실패 상태 기록

\#\#\# GitHub Actions에서 수행하지 않을 작업  
\- Build  
\- Deploy  
\- 환경 분기  
\- matrix job  
\- diff 기반 조건 분기  
\- 알림 전송

\---

\#\# 6\. 테스트 전략 (최소주의)

\#\#\# 목적  
\- 품질 보증이 아니라 명백한 실수 차단

\#\#\# Web / Frontend  
\- Lint: 사용  
\- Unit Test: 선택  
\- Integration Test: 사용하지 않음  
\- E2E Test: 사용하지 않음

\#\#\# Backend  
\- Lint: 사용  
\- Unit Test: 사용  
\- Integration Test: 선택  
\- DB Migration 자동화: 사용하지 않음

\---

\#\# 7\. 환경 변수 및 시크릿 관리

\- GitHub Secrets: CI에서 필요한 최소 값만 저장  
\- Railway Variables: 런타임 환경 변수 전담  
\- 동일한 시크릿을 여러 곳에 중복 저장하지 않는다  
\- Vault, Secret Rotation 등 고급 보안 정책은 적용하지 않는다

\---

\#\# 8\. 개발자 경험 (DX)

\#\#\# 이상적인 배포 플로우  
1\. 로컬에서 dev 실행  
2\. commit 및 push  
3\. GitHub Release 생성  
4\. GitHub Actions 최소 검증  
5\. Railway 단 1회 prod 배포

\#\#\# DX 목표  
\- 수동 작업 최소화  
\- 자동화는 개발을 방해하지 않는 수준으로만 적용  
\- 배포 흐름이 명확하고 예측 가능해야 한다  
\- 배포 사고 가능성을 최소화한다

\---

\#\# 9\. 산출물 요구사항

\- CI/CD 아키텍처 설명 문서  
\- GitHub Actions workflow (Release 트리거 기반, 초슬림 구성)  
\- Railway 연동 시 중복 배포 방지 체크 포인트  
\- 문서화용 Markdown 정리본

과한 베스트 프랙티스, 엔터프라이즈 패턴, 불필요한 자동화는 감점 요소다.

\---

\#\# 10\. 핵심 철학

Release는 자동화의 시작이 아니라,  
사람이 책임지고 내리는 배포 결정이다.

